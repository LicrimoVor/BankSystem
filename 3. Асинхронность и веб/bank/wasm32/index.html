<!--  demo.html -->

<!doctype html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<title>Rust + WebAssembly</title>
	</head>
	<body>
		<h1>Rust WebAssembly Demo</h1>

		<input type="text" id="nameInput" placeholder="Введите ваше имя" />
		<input type="number" id="greetingCountInput" placeholder="5" />
		<button id="greetButton">Приветствовать</button>
		<div id="output" style="white-space: pre"></div>
		<script type="module">
			import init, { greet } from "./pkg/wasm32.js";

			async function run() {
				await init();
				const greetButton = document.getElementById("greetButton");
				const nameInput = document.getElementById("nameInput");
				const greetingCountInput =
					document.getElementById("greetingCountInput");

				greetButton.addEventListener("click", () => {
					const name = nameInput.value || "Мир";
					const count = parseInt(greetingCountInput.value) || 1;
					let message = greet(name, count) + "\n";
					document.getElementById("output").textContent = message;
				});
			}

			run();
		</script>
	</body>
</html>
